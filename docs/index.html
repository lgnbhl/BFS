<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Search and download data from the Swiss Federal Statistical Office (BFS) APIs &lt;https://www.bfs.admin.ch/&gt;.">
<title>Get Data from the Swiss Federal Statistical Office • BFS</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Get Data from the Swiss Federal Statistical Office">
<meta property="og:description" content="Search and download data from the Swiss Federal Statistical Office (BFS) APIs &lt;https://www.bfs.admin.ch/&gt;.">
<meta property="og:image" content="https://felixluginbuhl.com/BFS/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">BFS</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.12</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="index.html">Home</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">News</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://www.linkedin.com/in/felixluginbuhl">
    <span class="fa fa-linkedin"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://twitter.com/FelixLuginbuhl">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/lgnbhl/BFS">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="http://felixluginbuhl.com">
    <span class="fa fa-home"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9">
<div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="bfs-">BFS <a class="anchor" aria-label="anchor" href="#bfs-"></a>
</h1>
</div>
<blockquote>
<p>Search and download data from the Swiss Federal Statistical Office</p>
</blockquote>
<p>The <code>BFS</code> package allows to search and download public data from the <a href="https://www.bfs.admin.ch/bfs/en/home/statistics/catalogue.html" target="_blank" class="external-link">Swiss Federal Statistical Office</a> (BFS stands for <em>Bundesamt für Statistik</em> in German) APIs in a dynamic and reproducible way.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"BFS"</span><span class="op">)</span></span></code></pre></div>
<p>You can also install the development version from Github.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"lgnbhl/BFS"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://felixluginbuhl.com/BFS/">BFS</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="get-the-data-catalog">Get the data catalog<a class="anchor" aria-label="anchor" href="#get-the-data-catalog"></a>
</h3>
<p>Before downloading a BFS dataset, you need to get its related BFS number (FSO number) in the <a href="https://www.bfs.admin.ch/bfs/en/home/statistics/catalogue.html" class="external-link">official data catalog</a>. You can search in the catalog directly from R using the <code><a href="reference/bfs_get_catalog_data.html">bfs_get_catalog_data()</a></code> function in any language (“de”, “fr”, “it” or “en”):</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/bfs_get_catalog_data.html">bfs_get_catalog_data</a></span><span class="op">(</span>language <span class="op">=</span> <span class="st">"en"</span>, extended_search <span class="op">=</span> <span class="st">"student"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="do">## # A tibble: 4 × 6</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="do">##   title                 language number_bfs number_asset publication_date url_px</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="do">##   &lt;chr&gt;                 &lt;chr&gt;    &lt;chr&gt;      &lt;chr&gt;        &lt;date&gt;           &lt;chr&gt; </span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="do">## 1 University of applie… en       px-x-1502… 31306033     2024-03-28       https…</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="do">## 2 University of applie… en       px-x-1502… 31306029     2024-03-28       https…</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a><span class="do">## 3 University students … en       px-x-1502… 31305852     2024-03-28       https…</span></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="do">## 4 University students … en       px-x-1502… 31305854     2024-03-28       https…</span></span></code></pre></div>
<p>You can search in the data catalog using the following arguments:</p>
<ul>
<li>
<code>language</code>: The language of a BFS catalog, i.e. “de”, “fr”, “it” or “en”.</li>
<li>
<code>title</code>: to search in title, subtitle and supertitle.</li>
<li>
<code>extended_search</code>: extended search in (sub/super)title, orderNr, summary, shortSummary, shortTextGNP.</li>
<li>
<code>spatial_division</code>: choose between “Switzerland”, “Cantons”, “Districts”, “Communes”, “Other spatial divisions” or “International”.</li>
<li>
<code>prodima</code>: by specific BFS themes using a unique prodima number.</li>
<li>
<code>inquiry</code>: by inquiry number.</li>
<li>
<code>institution</code>: by institution.</li>
<li>
<code>publishing_year_start</code>: by publishing year start.</li>
<li>
<code>publishing_year_end</code>: by publishing year end.</li>
<li>
<code>order_nr</code>: by BFS Number (FSO number).</li>
<li>
<code>limit</code>: limit of query results (API limit seems to be 350)</li>
<li>
<code>article_model_group</code>: article model group</li>
<li>
<code>article_model</code>: article model</li>
</ul>
<p>Note that English (“en”) and Italian (“it”) data catalogs offer a limited list of datasets. For the full list please get the French (“fr”) or German (“de”) data catalogs (see <code>language_available</code> column).</p>
<p>To return all the catalog metadata in the raw (uncleaned) structure, you can add <code>return_raw = TRUE</code>:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">catalog_raw</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bfs_get_catalog_data.html">bfs_get_catalog_data</a></span><span class="op">(</span></span>
<span>  language <span class="op">=</span> <span class="st">"en"</span>, </span>
<span>  extended_search <span class="op">=</span> <span class="st">"student"</span>, </span>
<span>  return_raw <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">catalog_raw</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="do">## # A tibble: 4 × 5</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="do">##   ids$uuid      $contentId bfs$embargo description$titles$m…¹ shop$orderNr links</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="do">##   &lt;chr&gt;              &lt;int&gt; &lt;chr&gt;       &lt;chr&gt;                  &lt;chr&gt;        &lt;lis&gt;</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="do">## 1 9cb3291f-425…    2301224 2024-03-28… University of applied… px-x-150204… &lt;df&gt; </span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="do">## 2 8f65763b-907…    2301215 2024-03-28… University of applied… px-x-150204… &lt;df&gt; </span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="do">## 3 4fd81856-d35…    2301207 2024-03-28… University students b… px-x-150204… &lt;df&gt; </span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a><span class="do">## 4 7d7f1b9e-0c6…    2301195 2024-03-28… University students b… px-x-150204… &lt;df&gt; </span></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a><span class="do">## # ℹ abbreviated name: ¹​description$titles$main</span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a><span class="do">## # ℹ 14 more variables: ids$gnp &lt;chr&gt;, $damId &lt;int&gt;, $languageCopyId &lt;int&gt;,</span></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a><span class="do">## #   bfs$lifecycle &lt;df[,4]&gt;, $lifecycleGroup &lt;chr&gt;, $provisional &lt;lgl&gt;,</span></span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a><span class="do">## #   $articleModel &lt;df[,4]&gt;, $articleModelGroup &lt;df[,4]&gt;,</span></span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a><span class="do">## #   description$categorization &lt;df[,13]&gt;, $bibliography &lt;df[,1]&gt;,</span></span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a><span class="do">## #   $shortSummary &lt;df[,2]&gt;, $language &lt;chr&gt;, $abstractShort &lt;chr&gt;,</span></span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a><span class="do">## #   shop$stock &lt;lgl&gt;</span></span></code></pre></div>
<p>The data catalog in a raw structure returns a data.frame containing nested data.frames in some columns. Here an example to get the <code>description</code> nested data.frame as a tibble:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="va">catalog_raw</span><span class="op">$</span><span class="va">description</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="do">## # A tibble: 4 × 6</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="do">##   titles$main       categorization$colle…¹ bibliography$period shortSummary$html</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="do">##   &lt;chr&gt;             &lt;list&gt;                 &lt;chr&gt;               &lt;chr&gt;            </span></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="do">## 1 University of ap… &lt;df [2 × 4]&gt;           1997-2023           This dataset pre…</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a><span class="do">## 2 University of ap… &lt;df [2 × 4]&gt;           1997-2023           This dataset pre…</span></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="do">## 3 University stude… &lt;df [2 × 4]&gt;           1990-2023           This dataset pre…</span></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a><span class="do">## 4 University stude… &lt;df [2 × 4]&gt;           1980-2023           This dataset pre…</span></span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a><span class="do">## # ℹ abbreviated name: ¹​categorization$collection</span></span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a><span class="do">## # ℹ 15 more variables: categorization$prodima &lt;list&gt;, $inquiry &lt;list&gt;,</span></span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a><span class="do">## #   $spatialdivision &lt;list&gt;, $classification &lt;list&gt;, $institution &lt;list&gt;,</span></span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a><span class="do">## #   $publisher &lt;list&gt;, $tags &lt;list&gt;, $dataSource &lt;list&gt;, $copyrights &lt;list&gt;,</span></span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a><span class="do">## #   $termsOfUse &lt;list&gt;, $serie &lt;list&gt;, $periodicity &lt;list&gt;,</span></span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a><span class="do">## #   shortSummary$raw &lt;chr&gt;, language &lt;chr&gt;, abstractShort &lt;chr&gt;</span></span></code></pre></div>
<p>As the API limit is 350 results, you can get the full data catalog by looping on specific parameters. For example, you can loop over all <code>prodima</code> numbers (equivalent to BFS themes):</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># themes_names &lt;- c("Statistical basis and overviews 00", "Population 01", "Territory and environment 02", "Work and income 03", "National economy 04", "Prices 05", "Industry and services 06", "Agriculture and forestry 07", "Energy 08", "Construction and housing 09", "Tourism 10", "Mobility and transport 11", "Money, banks and insurance 12", "Social security 13", "Health 14", "Education and science 15", "Culture, media, information society, sports 16", "Politics 17", "General Government and finance 18", "Crime and criminal justice 19", "Economic and social situation of the population 20", "Sustainable development, regional and international disparities 21")</span></span>
<span><span class="va">themes_prodima</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">900001</span>, <span class="fl">900010</span>, <span class="fl">900035</span>, <span class="fl">900051</span>, <span class="fl">900075</span>, <span class="fl">900084</span>, <span class="fl">900092</span>, <span class="fl">900104</span>, <span class="fl">900127</span>, <span class="fl">900140</span>, <span class="fl">900160</span>, <span class="fl">900169</span>, <span class="fl">900191</span>, <span class="fl">900198</span>, <span class="fl">900210</span>, <span class="fl">900212</span>, <span class="fl">900214</span>, <span class="fl">900226</span>, <span class="fl">900239</span>, <span class="fl">900257</span>, <span class="fl">900269</span>, <span class="fl">900276</span><span class="op">)</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://purrr.tidyverse.org/" class="external-link">purrr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">catalog_all</span> <span class="op">&lt;-</span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map_dfr.html" class="external-link">pmap_dfr</a></span><span class="op">(</span></span>
<span>  .l <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>language <span class="op">=</span> <span class="st">"de"</span>, prodima <span class="op">=</span> <span class="va">themes_prodima</span>, return_raw <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  .f <span class="op">=</span> <span class="va">bfs_get_catalog_data</span>,</span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">catalog_all</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="do">## # A tibble: 764 × 5</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="do">##    ids$uuid     $contentId bfs$embargo description$titles$m…¹ shop$orderNr links</span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="do">##    &lt;chr&gt;             &lt;int&gt; &lt;chr&gt;       &lt;chr&gt;                  &lt;chr&gt;        &lt;lis&gt;</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="do">##  1 8a2bfd2e-a9…    1085359 2024-10-03… Privathaushalte nach … px-x-010202… &lt;df&gt; </span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="do">##  2 a964371b-27…    1085346 2024-10-03… Ständige Wohnbevölker… px-x-010202… &lt;df&gt; </span></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a><span class="do">##  3 ef70eb19-93…     325772 2024-09-26… Heiraten und Heiratsh… px-x-010202… &lt;df&gt; </span></span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a><span class="do">##  4 32069ba3-1c…     189095 2024-09-26… Lebendgeburten nach M… px-x-010202… &lt;df&gt; </span></span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a><span class="do">##  5 5a8b2ea1-e2…     325776 2024-09-26… Scheidungen und Schei… px-x-010202… &lt;df&gt; </span></span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a><span class="do">##  6 66f3d4f6-ed…     189065 2024-09-26… Todesfälle nach Monat… px-x-010202… &lt;df&gt; </span></span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a><span class="do">##  7 51dfa1cf-21…   13807205 2024-08-23… Männliche Vornamen de… px-x-010405… &lt;df&gt; </span></span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a><span class="do">##  8 b65c9036-b0…   13807212 2024-08-23… Weibliche Vornamen de… px-x-010405… &lt;df&gt; </span></span>
<span id="cb11-12"><a href="#cb11-12" tabindex="-1"></a><span class="do">##  9 38a86458-22…     189124 2024-08-22… Auswanderung der stän… px-x-010302… &lt;df&gt; </span></span>
<span id="cb11-13"><a href="#cb11-13" tabindex="-1"></a><span class="do">## 10 6426823f-cb…     189120 2024-08-22… Auswanderung der stän… px-x-010302… &lt;df&gt; </span></span>
<span id="cb11-14"><a href="#cb11-14" tabindex="-1"></a><span class="do">## # ℹ 754 more rows</span></span>
<span id="cb11-15"><a href="#cb11-15" tabindex="-1"></a><span class="do">## # ℹ abbreviated name: ¹​description$titles$main</span></span>
<span id="cb11-16"><a href="#cb11-16" tabindex="-1"></a><span class="do">## # ℹ 16 more variables: ids$gnp &lt;chr&gt;, $damId &lt;int&gt;, $languageCopyId &lt;int&gt;,</span></span>
<span id="cb11-17"><a href="#cb11-17" tabindex="-1"></a><span class="do">## #   bfs$lifecycle &lt;df[,4]&gt;, $lifecycleGroup &lt;chr&gt;, $provisional &lt;lgl&gt;,</span></span>
<span id="cb11-18"><a href="#cb11-18" tabindex="-1"></a><span class="do">## #   $articleModel &lt;df[,4]&gt;, $articleModelGroup &lt;df[,4]&gt;,</span></span>
<span id="cb11-19"><a href="#cb11-19" tabindex="-1"></a><span class="do">## #   $lastUpdatedVersion &lt;chr&gt;, description$titles$sub &lt;chr&gt;,</span></span>
<span id="cb11-20"><a href="#cb11-20" tabindex="-1"></a><span class="do">## #   description$categorization &lt;df[,13]&gt;, $bibliography &lt;df[,2]&gt;, …</span></span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># to not overload the server, please save the data frame locally</span></span>
<span><span class="co"># readr::write_csv(catalog_all, "catalog_all.csv") </span></span>
<span><span class="co"># catalog_all &lt;- readr::read_csv("catalog_all.csv") </span></span></code></pre></div>
<p>Please use this loop moderately to not overload BFS server unnecessarily (just run it when needed and save the result locally).</p>
</div>
<div class="section level3">
<h3 id="download-data-in-any-language">Download data in any language<a class="anchor" aria-label="anchor" href="#download-data-in-any-language"></a>
</h3>
<p>The function <code><a href="reference/bfs_get_data.html">bfs_get_data()</a></code> allows you to download any dataset from the <a href="https://www.bfs.admin.ch/bfs/en/home/statistics/catalogue.html" class="external-link">BFS catalog</a> (equivalent to selecting “data” in the “Article Type” dropdown of the BFS website) using its BFS number (FSO number).</p>
<p>Using the <code>number_bfs</code> argument (FSO number), you can get BFS data in a given language (“en”, “de”, “fr” or “it”) from the official PXWeb API of the Swiss Federal Statistical Office.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#catalog_student$number_bfs[1] # px-x-1502040100_131</span></span>
<span><span class="fu"><a href="reference/bfs_get_data.html">bfs_get_data</a></span><span class="op">(</span>number_bfs <span class="op">=</span> <span class="st">"px-x-1502040100_131"</span>, language <span class="op">=</span> <span class="st">"en"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="do">## # A tibble: 18,480 × 5</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="do">##    Year    `ISCED Field`     Sex    `Level of study`       `University students`</span></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="do">##    &lt;chr&gt;   &lt;chr&gt;             &lt;chr&gt;  &lt;chr&gt;                                  &lt;dbl&gt;</span></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a><span class="do">##  1 1980/81 Education science Male   First university degr…                   545</span></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a><span class="do">##  2 1980/81 Education science Male   Bachelor                                   0</span></span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a><span class="do">##  3 1980/81 Education science Male   Master                                     0</span></span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a><span class="do">##  4 1980/81 Education science Male   Doctorate                                 93</span></span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a><span class="do">##  5 1980/81 Education science Male   Further education, ad…                    13</span></span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a><span class="do">##  6 1980/81 Education science Female First university degr…                   946</span></span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a><span class="do">##  7 1980/81 Education science Female Bachelor                                   0</span></span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a><span class="do">##  8 1980/81 Education science Female Master                                     0</span></span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a><span class="do">##  9 1980/81 Education science Female Doctorate                                 70</span></span>
<span id="cb14-13"><a href="#cb14-13" tabindex="-1"></a><span class="do">## 10 1980/81 Education science Female Further education, ad…                    52</span></span>
<span id="cb14-14"><a href="#cb14-14" tabindex="-1"></a><span class="do">## # ℹ 18,470 more rows</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="too-many-requests-error-message">“Too Many Requests” error message<a class="anchor" aria-label="anchor" href="#too-many-requests-error-message"></a>
</h3>
<p>When running the <code><a href="reference/bfs_get_data.html">bfs_get_data()</a></code> function you may get the following error message (issue <a href="https://github.com/lgnbhl/BFS/issues/7" class="external-link">#7</a>).</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>Error <span class="cf">in</span> <span class="fu">pxweb_advanced_get</span>(<span class="at">url =</span> url, <span class="at">query =</span> query, <span class="at">verbose =</span> verbose) <span class="sc">:</span> </span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>  Too Many <span class="fu">Requests</span> (RFC <span class="dv">6585</span>) (HTTP <span class="dv">429</span>).</span></code></pre></div>
<p>This could happen because you ran too many times a <code>bfs_get_*()</code> function (API config is <a href="https://www.pxweb.bfs.admin.ch/api/v1/de/?config" class="external-link">here</a>). A solution is to wait a few seconds before running the next <code>bfs_get_*()</code> function. You can add a delay in your R code using the <code>delay</code> argument.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/bfs_get_data.html">bfs_get_data</a></span><span class="op">(</span></span>
<span>  number_bfs <span class="op">=</span> <span class="st">"px-x-1502040100_131"</span>, </span>
<span>  language <span class="op">=</span> <span class="st">"en"</span>, </span>
<span>  delay <span class="op">=</span> <span class="fl">10</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>If the error message remains, it could be because you are querying a very large BFS dataset. Two workarounds exist: a) download the BFS file using <code><a href="reference/bfs_download_asset.html">bfs_download_asset()</a></code> to read it locally or b) query only specific elements of the data to reduce the API call (see next section).</p>
<p>Here an example using the <code><a href="reference/bfs_download_asset.html">bfs_download_asset()</a></code> function:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">BFS</span><span class="fu">::</span><span class="fu"><a href="reference/bfs_download_asset.html">bfs_download_asset</a></span><span class="op">(</span></span>
<span>  number_bfs <span class="op">=</span> <span class="st">"px-x-1502040100_131"</span>, <span class="co">#number_asset also possible</span></span>
<span>  destfile <span class="op">=</span> <span class="st">"px-x-1502040100_131.px"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/cjgb/pxR" class="external-link">pxR</a></span><span class="op">)</span> <span class="co"># install.packages("pxR")</span></span>
<span><span class="va">large_dataset</span> <span class="op">&lt;-</span> <span class="fu">pxR</span><span class="fu">::</span><span class="fu">read.px</span><span class="op">(</span>filename <span class="op">=</span> <span class="st">"px-x-1502040100_131.px"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Note that reading a PX file using <code>pxR::read.px()</code> gives access only to the German version.</p>
</div>
<div class="section level3">
<h3 id="query-specific-elements">Query specific elements<a class="anchor" aria-label="anchor" href="#query-specific-elements"></a>
</h3>
<p>First you want to get the metadata of your dataset, i.e. the variables (<code>code</code> and <code>text</code>) and dimensions (<code>values</code> and <code>valueTexts</code>). For example:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bfs_get_metadata.html">bfs_get_metadata</a></span><span class="op">(</span>number_bfs <span class="op">=</span> <span class="st">"px-x-1502040100_131"</span>, language <span class="op">=</span> <span class="st">"en"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># tidy metadata</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span> <span class="co"># for unnest_longer</span></span>
<span></span>
<span><span class="va">metadata_tidy</span> <span class="op">&lt;-</span> <span class="va">metadata</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest_longer.html" class="external-link">unnest_longer</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">values</span>, <span class="va">valueTexts</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">metadata_tidy</span></span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="do">## # A tibble: 92 × 7</span></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="do">##    code  text  values valueTexts time  elimination</span></span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a><span class="do">##    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;      &lt;lgl&gt; &lt;lgl&gt;      </span></span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a><span class="do">##  1 Jahr  Year  0      1980/81    TRUE  NA         </span></span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a><span class="do">##  2 Jahr  Year  1      1981/82    TRUE  NA         </span></span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a><span class="do">##  3 Jahr  Year  2      1982/83    TRUE  NA         </span></span>
<span id="cb19-7"><a href="#cb19-7" tabindex="-1"></a><span class="do">##  4 Jahr  Year  3      1983/84    TRUE  NA         </span></span>
<span id="cb19-8"><a href="#cb19-8" tabindex="-1"></a><span class="do">##  5 Jahr  Year  4      1984/85    TRUE  NA         </span></span>
<span id="cb19-9"><a href="#cb19-9" tabindex="-1"></a><span class="do">##  6 Jahr  Year  5      1985/86    TRUE  NA         </span></span>
<span id="cb19-10"><a href="#cb19-10" tabindex="-1"></a><span class="do">##  7 Jahr  Year  6      1986/87    TRUE  NA         </span></span>
<span id="cb19-11"><a href="#cb19-11" tabindex="-1"></a><span class="do">##  8 Jahr  Year  7      1987/88    TRUE  NA         </span></span>
<span id="cb19-12"><a href="#cb19-12" tabindex="-1"></a><span class="do">##  9 Jahr  Year  8      1988/89    TRUE  NA         </span></span>
<span id="cb19-13"><a href="#cb19-13" tabindex="-1"></a><span class="do">## 10 Jahr  Year  9      1989/90    TRUE  NA         </span></span>
<span id="cb19-14"><a href="#cb19-14" tabindex="-1"></a><span class="do">## # ℹ 82 more rows</span></span>
<span id="cb19-15"><a href="#cb19-15" tabindex="-1"></a><span class="do">## # ℹ 1 more variable: title &lt;chr&gt;</span></span></code></pre></div>
<p>Then you can filter the dimensions you want to query using the <code>text</code> and <code>valueTexts</code> variables and build the query dimension object with the <code>code</code> and <code>values</code> variables.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># select dimensions</span></span>
<span><span class="va">dim1</span> <span class="op">&lt;-</span> <span class="va">metadata_tidy</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">text</span> <span class="op">==</span> <span class="st">"Year"</span> <span class="op">&amp;</span> <span class="va">valueTexts</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2020/21"</span>, <span class="st">"2021/22"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">dim2</span> <span class="op">&lt;-</span> <span class="va">metadata_tidy</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">text</span> <span class="op">==</span> <span class="st">"Level of study"</span> <span class="op">&amp;</span> <span class="va">valueTexts</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Master"</span>, <span class="st">"Doctorate"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">dim3</span> <span class="op">&lt;-</span> <span class="va">metadata_tidy</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">text</span> <span class="op">==</span> <span class="st">"ISCED Field"</span> <span class="op">&amp;</span> <span class="va">valueTexts</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Education science"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">dim4</span> <span class="op">&lt;-</span> <span class="va">metadata_tidy</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">text</span> <span class="op">==</span> <span class="st">"Sex"</span><span class="op">)</span> <span class="co"># all valueTexts dimensions</span></span>
<span></span>
<span><span class="co"># build dimensions list object</span></span>
<span><span class="va">dimensions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="va">dim1</span><span class="op">$</span><span class="va">values</span>,</span>
<span>  <span class="va">dim2</span><span class="op">$</span><span class="va">values</span>,</span>
<span>  <span class="va">dim3</span><span class="op">$</span><span class="va">values</span>,</span>
<span>  <span class="va">dim4</span><span class="op">$</span><span class="va">values</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">dimensions</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">dim1</span><span class="op">$</span><span class="va">code</span><span class="op">)</span>, </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">dim2</span><span class="op">$</span><span class="va">code</span><span class="op">)</span>, </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">dim3</span><span class="op">$</span><span class="va">code</span><span class="op">)</span>, </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">dim4</span><span class="op">$</span><span class="va">code</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">dimensions</span></span></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="do">## $Jahr</span></span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a><span class="do">## [1] "40" "41"</span></span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a><span class="do">## $Studienstufe</span></span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a><span class="do">## [1] "2" "3"</span></span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a><span class="do">## $`ISCED Fach`</span></span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a><span class="do">## [1] "0"</span></span>
<span id="cb21-9"><a href="#cb21-9" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb21-10"><a href="#cb21-10" tabindex="-1"></a><span class="do">## $Geschlecht</span></span>
<span id="cb21-11"><a href="#cb21-11" tabindex="-1"></a><span class="do">## [1] "0" "1"</span></span></code></pre></div>
<p>Finally you can query BFS data with specific dimensions.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">BFS</span><span class="fu">::</span><span class="fu"><a href="reference/bfs_get_data.html">bfs_get_data</a></span><span class="op">(</span></span>
<span>  number_bfs <span class="op">=</span> <span class="st">"px-x-1502040100_131"</span>,</span>
<span>  language <span class="op">=</span> <span class="st">"en"</span>,</span>
<span>  query <span class="op">=</span> <span class="va">dimensions</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb23"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="do">## # A tibble: 8 × 5</span></span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a><span class="do">##   Year    `ISCED Field`     Sex    `Level of study` `University students`</span></span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a><span class="do">##   &lt;chr&gt;   &lt;chr&gt;             &lt;chr&gt;  &lt;chr&gt;                            &lt;dbl&gt;</span></span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a><span class="do">## 1 2020/21 Education science Male   Master                             151</span></span>
<span id="cb23-5"><a href="#cb23-5" tabindex="-1"></a><span class="do">## 2 2020/21 Education science Male   Doctorate                          121</span></span>
<span id="cb23-6"><a href="#cb23-6" tabindex="-1"></a><span class="do">## 3 2020/21 Education science Female Master                             555</span></span>
<span id="cb23-7"><a href="#cb23-7" tabindex="-1"></a><span class="do">## 4 2020/21 Education science Female Doctorate                          306</span></span>
<span id="cb23-8"><a href="#cb23-8" tabindex="-1"></a><span class="do">## 5 2021/22 Education science Male   Master                             143</span></span>
<span id="cb23-9"><a href="#cb23-9" tabindex="-1"></a><span class="do">## 6 2021/22 Education science Male   Doctorate                          115</span></span>
<span id="cb23-10"><a href="#cb23-10" tabindex="-1"></a><span class="do">## 7 2021/22 Education science Female Master                             599</span></span>
<span id="cb23-11"><a href="#cb23-11" tabindex="-1"></a><span class="do">## 8 2021/22 Education science Female Doctorate                          318</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="catalog-of-tables">Catalog of tables<a class="anchor" aria-label="anchor" href="#catalog-of-tables"></a>
</h3>
<p>A lot of datasets are not accessible through the official PXWeb API. They are listed in the <a href="https://www.bfs.admin.ch/bfs/en/home/statistics/catalogue.html" class="external-link">data catalog</a> as “tables” in the “Article Type” dropdown of the BFS website. You can search for specific tables using <code><a href="reference/bfs_get_catalog_tables.html">bfs_get_catalog_tables()</a></code>.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">catalog_tables_en_students</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bfs_get_catalog_tables.html">bfs_get_catalog_tables</a></span><span class="op">(</span>language <span class="op">=</span> <span class="st">"en"</span>, extended_search <span class="op">=</span> <span class="st">"students"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">catalog_tables_en_students</span></span></code></pre></div>
<div class="sourceCode" id="cb25"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="do">## # A tibble: 5 × 5</span></span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a><span class="do">##   title                          language number_asset publication_date order_nr</span></span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a><span class="do">##   &lt;chr&gt;                          &lt;chr&gt;    &lt;chr&gt;        &lt;date&gt;           &lt;chr&gt;   </span></span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a><span class="do">## 1 Students at universities and … en       31826381     2024-05-01       ts-x-15…</span></span>
<span id="cb25-5"><a href="#cb25-5" tabindex="-1"></a><span class="do">## 2 Students at universities of a… en       31826380     2024-05-01       ts-x-15…</span></span>
<span id="cb25-6"><a href="#cb25-6" tabindex="-1"></a><span class="do">## 3 Students at universities and … en       31185431     2024-03-28       su-e-15…</span></span>
<span id="cb25-7"><a href="#cb25-7" tabindex="-1"></a><span class="do">## 4 Students at universities of a… en       31185438     2024-03-28       su-e-15…</span></span>
<span id="cb25-8"><a href="#cb25-8" tabindex="-1"></a><span class="do">## 5 Students at universities of t… en       31185427     2024-03-28       su-e-15…</span></span></code></pre></div>
<p>Most of the BFS tables are Excel or CSV files. You can download an table with <code><a href="reference/bfs_download_asset.html">bfs_download_asset()</a></code> using the <code>number asset</code>.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">tables_asset_number_students</span> <span class="op">&lt;-</span> <span class="va">catalog_tables_en_students</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">title</span> <span class="op">==</span> <span class="st">"Students at universities and institutes of technology: Basistables"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">number_asset</span><span class="op">)</span></span>
<span></span>
<span><span class="va">file_path</span> <span class="op">&lt;-</span> <span class="fu">BFS</span><span class="fu">::</span><span class="fu"><a href="reference/bfs_download_asset.html">bfs_download_asset</a></span><span class="op">(</span></span>
<span>  number_asset <span class="op">=</span> <span class="va">tables_asset_number_students</span>,</span>
<span>  destfile <span class="op">=</span> <span class="st">"su-e-15.02.04.01.xlsx"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>To return all the catalog metadata in the raw (uncleaned) structure, you can add <code>return_raw = TRUE</code>:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">catalog_tables_raw</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bfs_get_catalog_tables.html">bfs_get_catalog_tables</a></span><span class="op">(</span></span>
<span>  language <span class="op">=</span> <span class="st">"en"</span>, </span>
<span>  extended_search <span class="op">=</span> <span class="st">"student"</span>, </span>
<span>  return_raw <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">catalog_tables_raw</span></span></code></pre></div>
<div class="sourceCode" id="cb28"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="do">## # A tibble: 6 × 5</span></span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a><span class="do">##   ids$uuid      $contentId bfs$embargo description$titles$m…¹ shop$orderNr links</span></span>
<span id="cb28-3"><a href="#cb28-3" tabindex="-1"></a><span class="do">##   &lt;chr&gt;              &lt;int&gt; &lt;chr&gt;       &lt;chr&gt;                  &lt;chr&gt;        &lt;lis&gt;</span></span>
<span id="cb28-4"><a href="#cb28-4" tabindex="-1"></a><span class="do">## 1 a5169f0b-6f8…   14876281 2024-10-31… Student mobility with… su-e-15.02.… &lt;df&gt; </span></span>
<span id="cb28-5"><a href="#cb28-5" tabindex="-1"></a><span class="do">## 2 7a604831-d27…   20044168 2024-05-01… Students at universit… ts-x-15.02.… &lt;df&gt; </span></span>
<span id="cb28-6"><a href="#cb28-6" tabindex="-1"></a><span class="do">## 3 ac4e3021-db4…   20044200 2024-05-01… Students at universit… ts-x-15.02.… &lt;df&gt; </span></span>
<span id="cb28-7"><a href="#cb28-7" tabindex="-1"></a><span class="do">## 4 5e328530-77f…     528179 2024-03-28… Students at universit… su-e-15.02.… &lt;df&gt; </span></span>
<span id="cb28-8"><a href="#cb28-8" tabindex="-1"></a><span class="do">## 5 6e27402b-8dc…     528173 2024-03-28… Students at universit… su-e-15.02.… &lt;df&gt; </span></span>
<span id="cb28-9"><a href="#cb28-9" tabindex="-1"></a><span class="do">## 6 1e86c267-5f9…     528176 2024-03-28… Students at universit… su-e-15.02.… &lt;df&gt; </span></span>
<span id="cb28-10"><a href="#cb28-10" tabindex="-1"></a><span class="do">## # ℹ abbreviated name: ¹​description$titles$main</span></span>
<span id="cb28-11"><a href="#cb28-11" tabindex="-1"></a><span class="do">## # ℹ 14 more variables: ids$gnp &lt;chr&gt;, $damId &lt;int&gt;, $languageCopyId &lt;int&gt;,</span></span>
<span id="cb28-12"><a href="#cb28-12" tabindex="-1"></a><span class="do">## #   bfs$lifecycle &lt;df[,4]&gt;, $lifecycleGroup &lt;chr&gt;, $provisional &lt;lgl&gt;,</span></span>
<span id="cb28-13"><a href="#cb28-13" tabindex="-1"></a><span class="do">## #   $articleModel &lt;df[,4]&gt;, $articleModelGroup &lt;df[,4]&gt;,</span></span>
<span id="cb28-14"><a href="#cb28-14" tabindex="-1"></a><span class="do">## #   description$categorization &lt;df[,13]&gt;, $bibliography &lt;df[,1]&gt;,</span></span>
<span id="cb28-15"><a href="#cb28-15" tabindex="-1"></a><span class="do">## #   $language &lt;chr&gt;, $shortSummary &lt;df[,2]&gt;, $abstractShort &lt;chr&gt;,</span></span>
<span id="cb28-16"><a href="#cb28-16" tabindex="-1"></a><span class="do">## #   shop$stock &lt;lgl&gt;</span></span></code></pre></div>
<p>The data catalog in a raw structure returns a data.frame containing nested data.frames in some columns. Here an example to get the <code>description</code> nested data.frame as a tibble:</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="va">catalog_tables_raw</span><span class="op">$</span><span class="va">description</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb30"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="do">## # A tibble: 6 × 6</span></span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a><span class="do">##   titles$main                categorization$colle…¹ bibliography$period language</span></span>
<span id="cb30-3"><a href="#cb30-3" tabindex="-1"></a><span class="do">##   &lt;chr&gt;                      &lt;list&gt;                 &lt;chr&gt;               &lt;chr&gt;   </span></span>
<span id="cb30-4"><a href="#cb30-4" tabindex="-1"></a><span class="do">## 1 Student mobility within S… &lt;df [2 × 4]&gt;           2022                EN      </span></span>
<span id="cb30-5"><a href="#cb30-5" tabindex="-1"></a><span class="do">## 2 Students at universities … &lt;df [3 × 4]&gt;           1980-2023           DE/EN/F…</span></span>
<span id="cb30-6"><a href="#cb30-6" tabindex="-1"></a><span class="do">## 3 Students at universities … &lt;df [3 × 4]&gt;           2000-2023           DE/EN/F…</span></span>
<span id="cb30-7"><a href="#cb30-7" tabindex="-1"></a><span class="do">## 4 Students at universities … &lt;df [3 × 4]&gt;           1990-2023           EN      </span></span>
<span id="cb30-8"><a href="#cb30-8" tabindex="-1"></a><span class="do">## 5 Students at universities … &lt;df [3 × 4]&gt;           1997-2023           EN      </span></span>
<span id="cb30-9"><a href="#cb30-9" tabindex="-1"></a><span class="do">## 6 Students at universities … &lt;df [2 × 4]&gt;           2005-2023           EN      </span></span>
<span id="cb30-10"><a href="#cb30-10" tabindex="-1"></a><span class="do">## # ℹ abbreviated name: ¹​categorization$collection</span></span>
<span id="cb30-11"><a href="#cb30-11" tabindex="-1"></a><span class="do">## # ℹ 14 more variables: categorization$prodima &lt;list&gt;, $inquiry &lt;list&gt;,</span></span>
<span id="cb30-12"><a href="#cb30-12" tabindex="-1"></a><span class="do">## #   $spatialdivision &lt;list&gt;, $classification &lt;list&gt;, $institution &lt;list&gt;,</span></span>
<span id="cb30-13"><a href="#cb30-13" tabindex="-1"></a><span class="do">## #   $publisher &lt;list&gt;, $tags &lt;list&gt;, $dataSource &lt;list&gt;, $copyrights &lt;list&gt;,</span></span>
<span id="cb30-14"><a href="#cb30-14" tabindex="-1"></a><span class="do">## #   $termsOfUse &lt;list&gt;, $serie &lt;list&gt;, $periodicity &lt;list&gt;,</span></span>
<span id="cb30-15"><a href="#cb30-15" tabindex="-1"></a><span class="do">## #   shortSummary &lt;df[,2]&gt;, abstractShort &lt;chr&gt;</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="access-geodata-catalog">Access geodata catalog<a class="anchor" aria-label="anchor" href="#access-geodata-catalog"></a>
</h2>
<p>Display geo-information catalog of the Swiss Official STAC API using <code><a href="reference/bfs_get_catalog_geodata.html">bfs_get_catalog_geodata()</a></code>.</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">catalog_geodata</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bfs_get_catalog_geodata.html">bfs_get_catalog_geodata</a></span><span class="op">(</span>include_metadata <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">catalog_geodata</span></span></code></pre></div>
<div class="sourceCode" id="cb32"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="do">## # A tibble: 281 × 12</span></span>
<span id="cb32-2"><a href="#cb32-2" tabindex="-1"></a><span class="do">##    collection_id     type  href  title description created updated crs   license</span></span>
<span id="cb32-3"><a href="#cb32-3" tabindex="-1"></a><span class="do">##    &lt;chr&gt;             &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;  </span></span>
<span id="cb32-4"><a href="#cb32-4" tabindex="-1"></a><span class="do">##  1 ch.are.agglomera… API   http… Citi… "The list … 2021-1… 2023-0… http… propri…</span></span>
<span id="cb32-5"><a href="#cb32-5" tabindex="-1"></a><span class="do">##  2 ch.are.alpenkonv… API   http… Alpi… "The perim… 2021-1… 2022-0… http… propri…</span></span>
<span id="cb32-6"><a href="#cb32-6" tabindex="-1"></a><span class="do">##  3 ch.are.belastung… API   http… Load… "Passenger… 2021-1… 2022-0… http… propri…</span></span>
<span id="cb32-7"><a href="#cb32-7" tabindex="-1"></a><span class="do">##  4 ch.are.belastung… API   http… Load… "Passenger… 2021-1… 2022-0… http… propri…</span></span>
<span id="cb32-8"><a href="#cb32-8" tabindex="-1"></a><span class="do">##  5 ch.are.belastung… API   http… Load… "Vehicles … 2021-1… 2022-0… http… propri…</span></span>
<span id="cb32-9"><a href="#cb32-9" tabindex="-1"></a><span class="do">##  6 ch.are.belastung… API   http… Load… "Vehicles … 2021-1… 2022-0… http… propri…</span></span>
<span id="cb32-10"><a href="#cb32-10" tabindex="-1"></a><span class="do">##  7 ch.are.erreichba… API   http… Acce… "Accessibi… 2021-1… 2022-0… http… propri…</span></span>
<span id="cb32-11"><a href="#cb32-11" tabindex="-1"></a><span class="do">##  8 ch.are.erreichba… API   http… Acce… "Accessibi… 2021-1… 2022-0… http… propri…</span></span>
<span id="cb32-12"><a href="#cb32-12" tabindex="-1"></a><span class="do">##  9 ch.are.gemeindet… API   http… Typo… "The typol… 2021-1… 2022-0… http… propri…</span></span>
<span id="cb32-13"><a href="#cb32-13" tabindex="-1"></a><span class="do">## 10 ch.are.gueteklas… API   http… Publ… "The publi… 2021-1… 2023-0… http… propri…</span></span>
<span id="cb32-14"><a href="#cb32-14" tabindex="-1"></a><span class="do">## # ℹ 271 more rows</span></span>
<span id="cb32-15"><a href="#cb32-15" tabindex="-1"></a><span class="do">## # ℹ 3 more variables: provider_name &lt;chr&gt;, bbox &lt;list&gt;, inverval &lt;list&gt;</span></span></code></pre></div>
<div class="section level3">
<h3 id="download-geodata">Download geodata<a class="anchor" aria-label="anchor" href="#download-geodata"></a>
</h3>
<p>For example you can get information about the dataset “Generalised borders G1 and area with urban character”.</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">geodata_g1</span> <span class="op">&lt;-</span> <span class="va">catalog_geodata</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">title</span> <span class="op">==</span> <span class="st">"Generalised borders G1 and area with urban character"</span><span class="op">)</span></span>
<span>  </span>
<span><span class="va">geodata_g1</span></span></code></pre></div>
<div class="sourceCode" id="cb34"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="do">## # A tibble: 1 × 12</span></span>
<span id="cb34-2"><a href="#cb34-2" tabindex="-1"></a><span class="do">##   collection_id      type  href  title description created updated crs   license</span></span>
<span id="cb34-3"><a href="#cb34-3" tabindex="-1"></a><span class="do">##   &lt;chr&gt;              &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;  </span></span>
<span id="cb34-4"><a href="#cb34-4" tabindex="-1"></a><span class="do">## 1 ch.bfs.generalisi… API   http… Gene… Administra… 2022-0… 2023-0… http… propri…</span></span>
<span id="cb34-5"><a href="#cb34-5" tabindex="-1"></a><span class="do">## # ℹ 3 more variables: provider_name &lt;chr&gt;, bbox &lt;list&gt;, inverval &lt;list&gt;</span></span></code></pre></div>
<p>Download dataset by collection id with <code><a href="reference/bfs_download_geodata.html">bfs_download_geodata()</a></code> and unzip file if needed.</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Access Generalised borders G1 and area with urban character</span></span>
<span><span class="va">borders_g1_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bfs_download_geodata.html">bfs_download_geodata</a></span><span class="op">(</span></span>
<span>  collection_id <span class="op">=</span> <span class="st">"ch.bfs.generalisierte-grenzen_agglomerationen_g1"</span>, </span>
<span>  output_dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span> <span class="co">#  temporary directory</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># you may need to unzip the file</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/unzip.html" class="external-link">unzip</a></span><span class="op">(</span><span class="va">borders_g1_path</span><span class="op">[</span><span class="fl">4</span><span class="op">]</span>, exdir <span class="op">=</span> <span class="st">"borders_G1"</span><span class="op">)</span></span></code></pre></div>
<p>By default, the files are downloaded in a temporary directory. You can specify the folder where saving the files using the <code>output_dir</code> argument.</p>
<p>Some layers are accessible using WMS (Web Map Service):</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rstudio.github.io/leaflet/" class="external-link">leaflet</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rstudio.github.io/leaflet/reference/leaflet.html" class="external-link">leaflet</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rstudio.github.io/leaflet/reference/map-methods.html" class="external-link">setView</a></span><span class="op">(</span>lng <span class="op">=</span> <span class="fl">8</span>, lat <span class="op">=</span> <span class="fl">46.8</span>, zoom <span class="op">=</span> <span class="fl">8</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rstudio.github.io/leaflet/reference/map-layers.html" class="external-link">addWMSTiles</a></span><span class="op">(</span></span>
<span>    baseUrl <span class="op">=</span> <span class="st">"https://wms.geo.admin.ch/?"</span>, </span>
<span>    layers <span class="op">=</span> <span class="st">"ch.bfs.generalisierte-grenzen_agglomerationen_g2"</span>,</span>
<span>    options <span class="op">=</span> <span class="fu"><a href="https://rstudio.github.io/leaflet/reference/map-options.html" class="external-link">WMSTileOptions</a></span><span class="op">(</span>format <span class="op">=</span> <span class="st">"image/png"</span>, transparent <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    attribution <span class="op">=</span> <span class="st">"Generalised borders G1 © 2024 BFS"</span><span class="op">)</span></span></code></pre></div>
<p><img style="border:1px solid black;" src="https://raw.githubusercontent.com/lgnbhl/BFS/master/man/figures/leaflet_g1.png" align="center"></p>
</div>
<div class="section level3">
<h3 id="cartographic-base-maps">Cartographic base maps<a class="anchor" aria-label="anchor" href="#cartographic-base-maps"></a>
</h3>
<p>You can get <a href="https://www.bfs.admin.ch/bfs/en/home/statistics/regional-statistics/base-maps/cartographic-bases.assetdetail.30566934.html" class="external-link">cartographic base maps</a> from the ThemaKart project using <code><a href="reference/bfs_get_base_maps.html">bfs_get_base_maps()</a></code>. The list of available geometries in the <a href="https://www.bfs.admin.ch/bfs/en/home/statistics/regional-statistics/base-maps/cartographic-bases.html" class="external-link">official documentation</a>.</p>
<p>The default arguments of <code><a href="reference/bfs_get_base_maps.html">bfs_get_base_maps()</a></code> can be change to access specific files:</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># default arguments</span></span>
<span><span class="fu"><a href="reference/bfs_get_base_maps.html">bfs_get_base_maps</a></span><span class="op">(</span></span>
<span>  geom <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  category <span class="op">=</span> <span class="st">"gf"</span>, <span class="co"># "gf" for total area (i.e. "Gesamtflaeche")</span></span>
<span>  type <span class="op">=</span> <span class="st">"Poly"</span>,</span>
<span>  date <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  most_recent <span class="op">=</span> <span class="cn">TRUE</span>, <span class="co">#get most recent file by default</span></span>
<span>  format <span class="op">=</span> <span class="st">"shp"</span>,</span>
<span>  asset_number <span class="op">=</span> <span class="st">"24025646"</span> <span class="co">#change ThemaKart geodata as updated every year</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>A typical base maps ThemaKart file looks like this:</p>
<p><img style="border:0px solid black;" src="https://raw.githubusercontent.com/lgnbhl/BFS/master/man/figures/base_maps_file.png" align="center"></p>
<p>All available geometry files in ThemaKart asset can be listed using <code>return_sf = FALSE</code>:</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">all_themakart_files</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bfs_get_base_maps.html">bfs_get_base_maps</a></span><span class="op">(</span></span>
<span>  return_sf <span class="op">=</span> <span class="cn">FALSE</span>, <span class="co"># do NOT return sf object</span></span>
<span>  asset_number <span class="op">=</span> <span class="st">"30566934"</span>, <span class="co"># ThemaKart asset of 2024</span></span>
<span>  geom <span class="op">=</span> <span class="st">""</span>, </span>
<span>  category <span class="op">=</span> <span class="st">""</span>, </span>
<span>  type <span class="op">=</span> <span class="st">""</span>, </span>
<span>  format <span class="op">=</span> <span class="st">""</span>,</span>
<span>  date <span class="op">=</span> <span class="st">""</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">all_themakart_files</span><span class="op">)</span> <span class="co"># number of files available</span></span></code></pre></div>
<div class="sourceCode" id="cb39"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a><span class="do">## [1] 701</span></span></code></pre></div>
<p>For example, all available river files can be found with:</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">all_river_files</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bfs_get_base_maps.html">bfs_get_base_maps</a></span><span class="op">(</span></span>
<span>    return_sf <span class="op">=</span> <span class="cn">FALSE</span>, <span class="co"># do NOT return sf object</span></span>
<span>    asset_number <span class="op">=</span> <span class="st">"30566934"</span>, <span class="co"># ThemaKart asset of 2024</span></span>
<span>    geom <span class="op">=</span> <span class="st">"flus"</span>, <span class="co"># "flus" for river related files</span></span>
<span>    category <span class="op">=</span> <span class="st">""</span>, </span>
<span>    type <span class="op">=</span> <span class="st">""</span>, </span>
<span>    format <span class="op">=</span> <span class="st">"shp"</span>,</span>
<span>    date <span class="op">=</span> <span class="st">""</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The function <code><a href="reference/bfs_get_base_maps.html">bfs_get_base_maps()</a></code> eases file selection with arguments and returns an sf object by default.</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">switzerland_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bfs_get_base_maps.html">bfs_get_base_maps</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"suis"</span><span class="op">)</span></span>
<span><span class="va">communes_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bfs_get_base_maps.html">bfs_get_base_maps</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"polg"</span><span class="op">)</span></span>
<span><span class="va">districts_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bfs_get_base_maps.html">bfs_get_base_maps</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"bezk"</span><span class="op">)</span></span>
<span><span class="va">cantons_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bfs_get_base_maps.html">bfs_get_base_maps</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"kant"</span><span class="op">)</span></span>
<span><span class="va">cantons_capitals_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bfs_get_base_maps.html">bfs_get_base_maps</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"stkt"</span>, type <span class="op">=</span> <span class="st">"Pnts"</span>, category <span class="op">=</span> <span class="st">"kk"</span><span class="op">)</span></span>
<span><span class="va">lakes_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bfs_get_base_maps.html">bfs_get_base_maps</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"seen"</span>, category <span class="op">=</span> <span class="st">"11"</span><span class="op">)</span></span>
<span><span class="co"># for some reason rivers don't have a "type" in their file names, so add type = ""</span></span>
<span><span class="va">rivers_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bfs_get_base_maps.html">bfs_get_base_maps</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"flus"</span>, type <span class="op">=</span> <span class="st">""</span>, category <span class="op">=</span> <span class="st">"22"</span><span class="op">)</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">communes_sf</span>, fill <span class="op">=</span> <span class="st">"snow"</span>, color <span class="op">=</span> <span class="st">"grey45"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">lakes_sf</span>, fill <span class="op">=</span> <span class="st">"lightblue2"</span>, color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">districts_sf</span>, fill <span class="op">=</span> <span class="st">"transparent"</span>, color <span class="op">=</span> <span class="st">"grey65"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">cantons_sf</span>, fill <span class="op">=</span> <span class="st">"transparent"</span>, color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">rivers_sf</span>, color <span class="op">=</span> <span class="st">"lightblue2"</span>, lwd <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">cantons_capitals_sf</span>, shape <span class="op">=</span> <span class="fl">18</span>, size <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>axis.text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"Source: ThemaKart, © BFS"</span><span class="op">)</span></span></code></pre></div>
<p><img style="border:1px solid black;" src="https://raw.githubusercontent.com/lgnbhl/BFS/master/man/figures/base_maps.png" align="center"></p>
<p>Note that the geometries are available for different date of data release. By default, <code><a href="reference/bfs_get_base_maps.html">bfs_get_base_maps()</a></code> tries to get the most recent date. You can specify the date using the “date” argument.</p>
<p>You can create an interactive map easily with the mapview R package.</p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-spatial/mapview" class="external-link">mapview</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu">BFS</span><span class="fu">::</span><span class="fu"><a href="reference/bfs_get_base_maps.html">bfs_get_base_maps</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"bezk"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">mapview</span><span class="op">(</span>zcol <span class="op">=</span> <span class="st">"name"</span>, legend <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p><img style="border:1px solid black;" src="https://raw.githubusercontent.com/lgnbhl/BFS/master/man/figures/mapview.png" align="center"></p>
</div>
<div class="section level3">
<h3 id="get-official-list-of-swiss-municipalities">Get official list of Swiss municipalities<a class="anchor" aria-label="anchor" href="#get-official-list-of-swiss-municipalities"></a>
</h3>
<p>You can also get the historicized list of Swiss municipalities from the official BFS API using the new <strong>swissMunicipalities</strong> R package. The documentation is <a href="https://github.com/SwissStatsR/swissMunicipalities" class="external-link">here</a>.</p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># remotes::install_github("SwissStatsR/swissMunicipalities")</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://swissstatsr.org/swissMunicipalities/" class="external-link">swissMunicipalities</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span> <span class="co"># just for data wrangling</span></span>
<span></span>
<span><span class="co"># snapshot of today list of Swiss municipalites/districts/cantons</span></span>
<span><span class="va">snapshot</span> <span class="op">&lt;-</span> <span class="fu">swissMunicipalities</span><span class="fu">::</span><span class="fu"><a href="http://swissstatsr.org/swissMunicipalities/reference/get_snapshots.html" class="external-link">get_snapshots</a></span><span class="op">(</span>hist_id <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">municipalities</span> <span class="op">&lt;-</span> <span class="va">snapshot</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Level</span> <span class="op">==</span> <span class="fl">3</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename_with</a></span><span class="op">(</span><span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">.x</span>, <span class="st">"_municipality"</span>, recycle0 <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">Level_municipality</span><span class="op">)</span></span>
<span></span>
<span><span class="va">districts</span> <span class="op">&lt;-</span> <span class="va">snapshot</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Level</span> <span class="op">==</span> <span class="fl">2</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename_with</a></span><span class="op">(</span><span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">.x</span>, <span class="st">"_district"</span>, recycle0 <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">Level_district</span><span class="op">)</span></span>
<span></span>
<span><span class="va">cantons</span> <span class="op">&lt;-</span> <span class="va">snapshot</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Level</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename_with</a></span><span class="op">(</span><span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">.x</span>, <span class="st">"_canton"</span>, recycle0 <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">Level_canton</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># consolidate municipality data with districts and cantons levels</span></span>
<span><span class="va">municipalities_consolidated</span> <span class="op">&lt;-</span> <span class="va">municipalities</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">districts</span>, by <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/join_by.html" class="external-link">join_by</a></span><span class="op">(</span><span class="va">Parent_municipality</span> <span class="op">==</span> <span class="va">Identifier_district</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">cantons</span>, by <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/join_by.html" class="external-link">join_by</a></span><span class="op">(</span><span class="va">Parent_district</span> <span class="op">==</span> <span class="va">Identifier_canton</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>Identifier_district <span class="op">=</span> <span class="va">Parent_municipality</span>, Identifier_canton <span class="op">=</span> <span class="va">Parent_district</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Identifier"</span>, <span class="st">"Name"</span>, <span class="st">"ABBREV"</span>, <span class="st">"Valid"</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">Identifier_municipality</span>, <span class="va">Identifier_district</span><span class="op">)</span></span>
<span></span>
<span><span class="va">municipalities_consolidated</span></span></code></pre></div>
<div class="sourceCode" id="cb44"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" tabindex="-1"></a><span class="co"># A tibble: 2,131 × 82</span></span>
<span id="cb44-2"><a href="#cb44-2" tabindex="-1"></a>   Identifier_municipality Identifier_district Identifier_canton Name_en_municipality Name_fr_municipality</span>
<span id="cb44-3"><a href="#cb44-3" tabindex="-1"></a>                     <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span>               <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>             <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>                <span class="er">&lt;</span>chr<span class="sc">&gt;</span>               </span>
<span id="cb44-4"><a href="#cb44-4" tabindex="-1"></a> <span class="dv">1</span>                       <span class="dv">1</span>                 <span class="dv">101</span>                 <span class="dv">1</span> Aeugst am Albis      Aeugst am Albis     </span>
<span id="cb44-5"><a href="#cb44-5" tabindex="-1"></a> <span class="dv">2</span>                       <span class="dv">2</span>                 <span class="dv">101</span>                 <span class="dv">1</span> Affoltern am Albis   Affoltern am Albis  </span>
<span id="cb44-6"><a href="#cb44-6" tabindex="-1"></a> <span class="dv">3</span>                       <span class="dv">3</span>                 <span class="dv">101</span>                 <span class="dv">1</span> Bonstetten           Bonstetten          </span>
<span id="cb44-7"><a href="#cb44-7" tabindex="-1"></a> <span class="dv">4</span>                       <span class="dv">4</span>                 <span class="dv">101</span>                 <span class="dv">1</span> Hausen am Albis      Hausen am Albis     </span>
<span id="cb44-8"><a href="#cb44-8" tabindex="-1"></a> <span class="dv">5</span>                       <span class="dv">5</span>                 <span class="dv">101</span>                 <span class="dv">1</span> Hedingen             Hedingen            </span>
<span id="cb44-9"><a href="#cb44-9" tabindex="-1"></a> <span class="dv">6</span>                       <span class="dv">6</span>                 <span class="dv">101</span>                 <span class="dv">1</span> Kappel am Albis      Kappel am Albis     </span>
<span id="cb44-10"><a href="#cb44-10" tabindex="-1"></a> <span class="dv">7</span>                       <span class="dv">7</span>                 <span class="dv">101</span>                 <span class="dv">1</span> Knonau               Knonau              </span>
<span id="cb44-11"><a href="#cb44-11" tabindex="-1"></a> <span class="dv">8</span>                       <span class="dv">8</span>                 <span class="dv">101</span>                 <span class="dv">1</span> Maschwanden          Maschwanden         </span>
<span id="cb44-12"><a href="#cb44-12" tabindex="-1"></a> <span class="dv">9</span>                       <span class="dv">9</span>                 <span class="dv">101</span>                 <span class="dv">1</span> Mettmenstetten       Mettmenstetten      </span>
<span id="cb44-13"><a href="#cb44-13" tabindex="-1"></a><span class="dv">10</span>                      <span class="dv">10</span>                 <span class="dv">101</span>                 <span class="dv">1</span> Obfelden             Obfelden            </span>
<span id="cb44-14"><a href="#cb44-14" tabindex="-1"></a><span class="co"># ℹ 2,121 more rows</span></span>
<span id="cb44-15"><a href="#cb44-15" tabindex="-1"></a><span class="co"># ℹ 77 more variables: Name_de_municipality &lt;chr&gt;, Name_it_municipality &lt;chr&gt;, Name_en_district &lt;chr&gt;,</span></span>
<span id="cb44-16"><a href="#cb44-16" tabindex="-1"></a><span class="co">#   Name_fr_district &lt;chr&gt;, Name_de_district &lt;chr&gt;, Name_it_district &lt;chr&gt;, Name_en_canton &lt;chr&gt;,</span></span>
<span id="cb44-17"><a href="#cb44-17" tabindex="-1"></a><span class="co">#   Name_fr_canton &lt;chr&gt;, Name_de_canton &lt;chr&gt;, Name_it_canton &lt;chr&gt;, ABBREV_1_Text_en_municipality &lt;chr&gt;,</span></span>
<span id="cb44-18"><a href="#cb44-18" tabindex="-1"></a><span class="co">#   ABBREV_1_Text_fr_municipality &lt;chr&gt;, ABBREV_1_Text_de_municipality &lt;chr&gt;, ABBREV_1_Text_it_municipality &lt;chr&gt;,</span></span>
<span id="cb44-19"><a href="#cb44-19" tabindex="-1"></a><span class="co">#   ABBREV_1_Text_municipality &lt;chr&gt;, ABBREV_1_Text_en_district &lt;chr&gt;, ABBREV_1_Text_fr_district &lt;chr&gt;,</span></span>
<span id="cb44-20"><a href="#cb44-20" tabindex="-1"></a><span class="co">#   ABBREV_1_Text_de_district &lt;chr&gt;, ABBREV_1_Text_it_district &lt;chr&gt;, ABBREV_1_Text_district &lt;chr&gt;, …</span></span>
<span id="cb44-21"><a href="#cb44-21" tabindex="-1"></a><span class="co"># ℹ Use `print(n = ...)` to see more rows</span></span></code></pre></div>
<p>You can now use the consolidated list of Swiss municipalities to ease geodata analysis.</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">communes_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bfs_get_base_maps.html">bfs_get_base_maps</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"polg"</span>, date <span class="op">=</span> <span class="st">"20230101"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">communes_ge</span> <span class="op">&lt;-</span> <span class="va">communes_sf</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">inner_join</a></span><span class="op">(</span><span class="va">municipalities_consolidated</span> <span class="op">|&gt;</span></span>
<span>               <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Name_de_canton</span> <span class="op">==</span> <span class="st">"Genève"</span><span class="op">)</span>, </span>
<span>             by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"id"</span> <span class="op">=</span> <span class="st">"Identifier_municipality"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">bbox_ge</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_bbox.html" class="external-link">st_bbox</a></span><span class="op">(</span><span class="va">communes_ge</span><span class="op">)</span></span>
<span></span>
<span><span class="va">lake_leman</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bfs_get_base_maps.html">bfs_get_base_maps</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"seen"</span>, category <span class="op">=</span> <span class="st">"11"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">name</span> <span class="op">==</span> <span class="st">"Lac Léman"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">communes_ge</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">lake_leman</span>, fill <span class="op">=</span> <span class="st">"lightblue2"</span>, color <span class="op">=</span> <span class="st">"grey65"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"snow"</span>, color <span class="op">=</span> <span class="st">"grey65"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">name</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">3</span>, check_overlap <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="co"># bounding box</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">coord_sf</a></span><span class="op">(</span></span>
<span>    xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">bbox_ge</span><span class="op">$</span><span class="va">xmin</span>, <span class="va">bbox_ge</span><span class="op">$</span><span class="va">xmax</span><span class="op">)</span>,</span>
<span>    ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">bbox_ge</span><span class="op">$</span><span class="va">ymin</span>, <span class="va">bbox_ge</span><span class="op">$</span><span class="va">ymax</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>axis.text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Communes du canton de Genève"</span>,</span>
<span>       x <span class="op">=</span> <span class="cn">NULL</span>, y <span class="op">=</span> <span class="cn">NULL</span>, </span>
<span>       caption <span class="op">=</span> <span class="st">"Source: ThemaKart, © BFS"</span><span class="op">)</span></span></code></pre></div>
<p><img style="border:1px solid black;" src="https://raw.githubusercontent.com/lgnbhl/BFS/master/man/figures/base_maps_ge.png" align="center"></p>
</div>
</div>
<div class="section level2">
<h2 id="main-dependencies-of-the-package">Main dependencies of the package<a class="anchor" aria-label="anchor" href="#main-dependencies-of-the-package"></a>
</h2>
<p>Under the hood, this package is using the <a href="https://ropengov.github.io/pxweb/index.html" target="_blank" class="external-link">pxweb</a> package to query the Swiss Federal Statistical Office PXWEB API. PXWEB is an API structure developed by Statistics Sweden and other national statistical institutions (NSI) to disseminate public statistics in a structured way. To query the Geo Admin STAC API, this package is using the <a href="https://brazil-data-cube.github.io/rstac/" class="external-link">rstac</a> package. STAC is a specification of files and web services used to describe geospatial information assets.</p>
<p>You can clean the column names of the datasets automatically using <code><a href="https://sfirke.github.io/janitor/reference/clean_names.html" class="external-link">janitor::clean_names()</a></code> by adding the argument <code>clean_names = TRUE</code> in the <code><a href="reference/bfs_get_data.html">bfs_get_data()</a></code> function.</p>
</div>
<div class="section level2">
<h2 id="other-information">Other information<a class="anchor" aria-label="anchor" href="#other-information"></a>
</h2>
<p>This package is in no way officially related to or endorsed by the Swiss Federal Statistical Office (BFS).</p>
</div>
<div class="section level2">
<h2 id="contribute">Contribute<a class="anchor" aria-label="anchor" href="#contribute"></a>
</h2>
<p>Any contribution is strongly appreciated. Feel free to report a bug, ask any question or make a pull request for any remaining <a href="https://github.com/lgnbhl/BFS/issues" class="external-link">issue</a>.</p>
</div>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=BFS" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/lgnbhl/BFS/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/lgnbhl/BFS/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing BFS</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://felixluginbuhl.com" class="external-link">Felix Luginbuhl</a> <br><small class="roles"> Author, maintainer, copyright holder </small> <a href="https://orcid.org/0009-0008-6625-2899" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://CRAN.R-project.org/package=BFS" class="external-link"><img src="https://www.r-pkg.org/badges/version/BFS" alt="CRAN status"></a></li>
<li><a href="https://cran.r-project.org/package=BFS" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/grand-total/BFS" alt="Grand total"></a></li>
<li><a href="https://github.com/lgnbhl/BFS/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/lgnbhl/BFS/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/lgnbhl/BFS?branch=master" class="external-link"><img src="https://codecov.io/gh/lgnbhl/BFS/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://www.linkedin.com/in/FelixLuginbuhl/" class="external-link"><img src="https://img.shields.io/badge/LinkedIn-Follow-E4405F?style=social&amp;logo=linkedin" alt="LinkedIn"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://felixluginbuhl.com" class="external-link">Felix Luginbuhl</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
