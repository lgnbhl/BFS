<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Search and download data from the Swiss Federal Statistical Office (BFS) APIs &lt;https://www.bfs.admin.ch/&gt;.">
<title>Get Data from the Swiss Federal Statistical Office • BFS</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Get Data from the Swiss Federal Statistical Office">
<meta property="og:description" content="Search and download data from the Swiss Federal Statistical Office (BFS) APIs &lt;https://www.bfs.admin.ch/&gt;.">
<meta property="og:image" content="https://felixluginbuhl.com/BFS/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">BFS</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.3</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="index.html">Home</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">News</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://www.linkedin.com/in/felixluginbuhl">
    <span class="fa fa-linkedin"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://twitter.com/FelixLuginbuhl">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/lgnbhl/BFS">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="http://felixluginbuhl.com">
    <span class="fa fa-home"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9">
<div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="bfs-">BFS <a class="anchor" aria-label="anchor" href="#bfs-"></a>
</h1>
</div>
<blockquote>
<p>Search and download data from the Swiss Federal Statistical Office</p>
</blockquote>
<p>The <code>BFS</code> package allows to search and download public data from the <a href="https://www.bfs.admin.ch/bfs/en/home/statistics/catalogues-databases/data.html" target="_blank" class="external-link">Swiss Federal Statistical Office</a> (BFS stands for <em>Bundesamt für Statistik</em> in German) APIs in a dynamic and reproducible way.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"BFS"</span><span class="op">)</span></span></code></pre></div>
<p>You can also install the development version from Github.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"lgnbhl/BFS"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://felixluginbuhl.com/BFS/">BFS</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="get-the-data-catalog">Get the data catalog<a class="anchor" aria-label="anchor" href="#get-the-data-catalog"></a>
</h3>
<p>Retrieve the list of publicly available datasets from the <a href="https://www.bfs.admin.ch/bfs/de/home/statistiken/kataloge-datenbanken/daten.html" class="external-link">data catalog</a> in any language (“de”, “fr”, “it” or “en”) by calling <code><a href="reference/bfs_get_catalog_data.html">bfs_get_catalog_data()</a></code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">catalog_data_en</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bfs_get_catalog_data.html">bfs_get_catalog_data</a></span><span class="op">(</span>language <span class="op">=</span> <span class="st">"en"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">catalog_data_en</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="do">## # A tibble: 184 × 7</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="do">##    title                language publication_date    number_asset url_bfs url_px</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="do">##    &lt;chr&gt;                &lt;chr&gt;    &lt;dttm&gt;                     &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt; </span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="do">##  1 Acknowledgment of p… en       2023-06-22 08:30:00     25945442 https:… https…</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="do">##  2 Adoptions by differ… en       2023-06-22 08:30:00     25945406 https:… https…</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a><span class="do">##  3 Deaths by instituti… en       2023-06-22 08:30:00     25945423 https:… https…</span></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="do">##  4 Deaths by sex, citi… en       2023-06-22 08:30:00     25945436 https:… https…</span></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a><span class="do">##  5 Deaths since 1803    en       2023-06-22 08:30:00     25945437 https:… https…</span></span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a><span class="do">##  6 Dissolved partnersh… en       2023-06-22 08:30:00     25945438 https:… https…</span></span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a><span class="do">##  7 Divorces by canton,… en       2023-06-22 08:30:00     25945378 https:… https…</span></span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a><span class="do">##  8 Divorces by duratio… en       2023-06-22 08:30:00     25945381 https:… https…</span></span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a><span class="do">##  9 Divorces by institu… en       2023-06-22 08:30:00     25945387 https:… https…</span></span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a><span class="do">## 10 Live births by inst… en       2023-06-22 08:30:00     25945410 https:… https…</span></span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a><span class="do">## # ℹ 174 more rows</span></span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a><span class="do">## # ℹ 1 more variable: catalog_date &lt;dttm&gt;</span></span></code></pre></div>
<p>You can search in the data catalog using the following arguments:</p>
<ul>
<li>
<code>language</code>: The language of a BFS catalog, i.e. “de”, “fr”, “it” or “en”.</li>
<li>
<code>title</code>: to search in title, subtitle and supertitle.</li>
<li>
<code>spatial_division</code>: choose between “Switzerland”, “Cantons”, “Districts”, “Communes”, “Other spatial divisions” or “International”.</li>
<li>
<code>prodima</code>: b specific BFS themes using one or multiple prodima numbers.</li>
<li>
<code>inquiry</code>: by inquiry.</li>
<li>
<code>institution</code>: by institution.</li>
<li>
<code>publishing_year_start</code>: by publishing year start.</li>
<li>
<code>publishing_year_end</code>: by publishing year end.</li>
<li>
<code>order_nr</code>: by BFS Number (FSO number).</li>
</ul>
<p>For example, you can search data related to students:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/bfs_get_catalog_data.html">bfs_get_catalog_data</a></span><span class="op">(</span>language <span class="op">=</span> <span class="st">"en"</span>, title <span class="op">=</span> <span class="st">"students"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="do">## # A tibble: 4 × 7</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="do">##   title                 language publication_date    number_asset url_bfs url_px</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="do">##   &lt;chr&gt;                 &lt;chr&gt;    &lt;dttm&gt;                     &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt; </span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="do">## 1 University of applie… en       2023-03-28 08:30:00     24367605 https:… https…</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="do">## 2 University of applie… en       2023-03-28 08:30:00     24367607 https:… https…</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="do">## 3 University students … en       2023-03-28 08:30:00     24367723 https:… https…</span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a><span class="do">## 4 University students … en       2023-03-28 08:30:00     24367729 https:… https…</span></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a><span class="do">## # ℹ 1 more variable: catalog_date &lt;dttm&gt;</span></span></code></pre></div>
<p>English (“en”) and Italian (“it”) data catalogs offer a limited list of datasets. For the full list please get the French (“fr”) or German (“de”) data catalogs.</p>
</div>
<div class="section level3">
<h3 id="download-data-in-any-language">Download data in any language<a class="anchor" aria-label="anchor" href="#download-data-in-any-language"></a>
</h3>
<p>The function <code><a href="reference/bfs_get_data.html">bfs_get_data()</a></code> allows you to download any dataset from the <a href="https://www.bfs.admin.ch/bfs/de/home/statistiken/kataloge-datenbanken/daten.html" class="external-link">data catalog</a> using its BFS number (FSO number).</p>
<p>You need first to find the asset number of the dataset.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span> <span class="co">#install.packages("dplyr")</span></span>
<span></span>
<span><span class="va">asset_number_students</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bfs_get_catalog_data.html">bfs_get_catalog_data</a></span><span class="op">(</span>language <span class="op">=</span> <span class="st">"en"</span>, title <span class="op">=</span> <span class="st">"students"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">title</span> <span class="op">==</span> <span class="st">"University students by year, ISCED field, sex and level of study"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">number_asset</span><span class="op">)</span></span>
<span></span>
<span><span class="va">asset_number_students</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="do">## [1] 24367729</span></span></code></pre></div>
<p>You can then find the BFS number by calling <code><a href="reference/bfs_get_asset_metadata.html">bfs_get_asset_metadata()</a></code>. This function returns a list containing the metadata of the asset. For the student data, the BFS number is in the <code>orderNR</code> variable.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">asset_meta_students</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bfs_get_asset_metadata.html">bfs_get_asset_metadata</a></span><span class="op">(</span>number_asset <span class="op">=</span> <span class="va">asset_number_students</span><span class="op">)</span></span>
<span></span>
<span><span class="va">bfs_number_students</span> <span class="op">&lt;-</span> <span class="va">asset_meta_students</span><span class="op">$</span><span class="va">shop</span><span class="op">$</span><span class="va">orderNr</span></span>
<span></span>
<span><span class="va">bfs_number_students</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="do">## [1] "px-x-1502040100_131"</span></span></code></pre></div>
<p>You can also manually find the BFS number (FSO number) by opening the related URL official webpage.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">url_bfs_students</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bfs_get_catalog_data.html">bfs_get_catalog_data</a></span><span class="op">(</span>language <span class="op">=</span> <span class="st">"en"</span>, title <span class="op">=</span> <span class="st">"students"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">title</span> <span class="op">==</span> <span class="st">"University students by year, ISCED field, sex and level of study"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">url_bfs</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># open students dataset webpage</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/browseURL.html" class="external-link">browseURL</a></span><span class="op">(</span><span class="va">url_bfs_students</span><span class="op">)</span></span></code></pre></div>
<p><img style="border:1px solid black;" src="https://raw.githubusercontent.com/lgnbhl/BFS/master/man/figures/stat-tab.png" align="center"></p>
<p><br></p>
<p>Finally you can get the data using the <code>number_bfs</code> argument in a given language (“en”, “de”, “fr” or “it”) from the official PXWeb API of the Swiss Federal Statistical Office.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/bfs_get_data.html">bfs_get_data</a></span><span class="op">(</span>number_bfs <span class="op">=</span> <span class="va">bfs_number_students</span>, language <span class="op">=</span> <span class="st">"en"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="do">## # A tibble: 18,060 × 5</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="do">##    Year    `ISCED Field`     Sex    `Level of study`       `University students`</span></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="do">##    &lt;chr&gt;   &lt;chr&gt;             &lt;chr&gt;  &lt;chr&gt;                                  &lt;dbl&gt;</span></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a><span class="do">##  1 1980/81 Education science Male   First university degr…                   545</span></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a><span class="do">##  2 1980/81 Education science Male   Bachelor                                   0</span></span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a><span class="do">##  3 1980/81 Education science Male   Master                                     0</span></span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a><span class="do">##  4 1980/81 Education science Male   Doctorate                                 93</span></span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a><span class="do">##  5 1980/81 Education science Male   Further education, ad…                    13</span></span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a><span class="do">##  6 1980/81 Education science Female First university degr…                   946</span></span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a><span class="do">##  7 1980/81 Education science Female Bachelor                                   0</span></span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a><span class="do">##  8 1980/81 Education science Female Master                                     0</span></span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a><span class="do">##  9 1980/81 Education science Female Doctorate                                 70</span></span>
<span id="cb14-13"><a href="#cb14-13" tabindex="-1"></a><span class="do">## 10 1980/81 Education science Female Further education, ad…                    52</span></span>
<span id="cb14-14"><a href="#cb14-14" tabindex="-1"></a><span class="do">## # ℹ 18,050 more rows</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="too-many-requests-error-message">“Too Many Requests” error message<a class="anchor" aria-label="anchor" href="#too-many-requests-error-message"></a>
</h3>
<p>When running the <code><a href="reference/bfs_get_data.html">bfs_get_data()</a></code> function you may get the following error message (issue <a href="https://github.com/lgnbhl/BFS/issues/7" class="external-link">#7</a>).</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>Error <span class="cf">in</span> <span class="fu">pxweb_advanced_get</span>(<span class="at">url =</span> url, <span class="at">query =</span> query, <span class="at">verbose =</span> verbose) <span class="sc">:</span> </span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>  Too Many <span class="fu">Requests</span> (RFC <span class="dv">6585</span>) (HTTP <span class="dv">429</span>).</span></code></pre></div>
<p>This could happen because you ran too many times a <code>bfs_get_*()</code> function (API config is <a href="https://www.pxweb.bfs.admin.ch/api/v1/de/?config" class="external-link">here</a>). A solution is to wait a few seconds before running the next <code>bfs_get_*()</code> function. You can add a delay in your R code, for instance using <code>Sys.sleep(11)</code> (11 seconds delay).</p>
<p>If the error message remains, it could be because you are querying a very large BFS dataset. Two workarounds exist: a) download the BFS file using <code><a href="reference/bfs_download_asset.html">bfs_download_asset()</a></code> to read it locally or b) query only specific elements of the data to reduce the API call (see next section).</p>
<p>Here an example using the <code><a href="reference/bfs_download_asset.html">bfs_download_asset()</a></code> function:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">BFS</span><span class="fu">::</span><span class="fu"><a href="reference/bfs_download_asset.html">bfs_download_asset</a></span><span class="op">(</span></span>
<span>  number_bfs <span class="op">=</span> <span class="st">"px-x-1502040100_131"</span>, <span class="co">#number_asset also possible</span></span>
<span>  destfile <span class="op">=</span> <span class="st">"px-x-1502040100_131.px"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/cjgb/pxR" class="external-link">pxR</a></span><span class="op">)</span> <span class="co"># install.packages("pxR")</span></span>
<span><span class="va">large_dataset</span> <span class="op">&lt;-</span> <span class="fu">pxR</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pxR/man/read.px.html" class="external-link">read.px</a></span><span class="op">(</span>filename <span class="op">=</span> <span class="st">"px-x-1502040100_131.px"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Note that reading a PX file using <code><a href="https://rdrr.io/pkg/pxR/man/read.px.html" class="external-link">pxR::read.px()</a></code> gives access only to the German version.</p>
</div>
<div class="section level3">
<h3 id="query-specific-elements">Query specific elements<a class="anchor" aria-label="anchor" href="#query-specific-elements"></a>
</h3>
<p>First you want to get the variable names, i.e. <code>code</code>, and categories, i.e. <code>values</code>, of your dataset. For example:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># choose a BFS number and language</span></span>
<span><span class="va">metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bfs_get_metadata.html">bfs_get_metadata</a></span><span class="op">(</span>number_bfs <span class="op">=</span> <span class="st">"px-x-1502040100_131"</span>, language <span class="op">=</span> <span class="st">"en"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">metadata</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb18"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="do">## tibble [4 × 7] (S3: tbl_df/tbl/data.frame)</span></span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="do">##  $ code       : chr [1:4] "Jahr" "ISCED Fach" "Geschlecht" "Studienstufe"</span></span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a><span class="do">##  $ text       : chr [1:4] "Year" "ISCED Field" "Sex" "Level of study"</span></span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a><span class="do">##  $ values     :List of 4</span></span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a><span class="do">##   ..$ : chr [1:43] "0" "1" "2" "3" ...</span></span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a><span class="do">##   ..$ : chr [1:42] "0" "1" "2" "3" ...</span></span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a><span class="do">##   ..$ : chr [1:2] "0" "1"</span></span>
<span id="cb18-8"><a href="#cb18-8" tabindex="-1"></a><span class="do">##   ..$ : chr [1:5] "0" "1" "2" "3" ...</span></span>
<span id="cb18-9"><a href="#cb18-9" tabindex="-1"></a><span class="do">##  $ valueTexts :List of 4</span></span>
<span id="cb18-10"><a href="#cb18-10" tabindex="-1"></a><span class="do">##   ..$ : chr [1:43] "1980/81" "1981/82" "1982/83" "1983/84" ...</span></span>
<span id="cb18-11"><a href="#cb18-11" tabindex="-1"></a><span class="do">##   ..$ : chr [1:42] "Education science" "Teacher training without subject specialisation" "Teacher training with subject specialisation" "Fine arts" ...</span></span>
<span id="cb18-12"><a href="#cb18-12" tabindex="-1"></a><span class="do">##   ..$ : chr [1:2] "Male" "Female"</span></span>
<span id="cb18-13"><a href="#cb18-13" tabindex="-1"></a><span class="do">##   ..$ : chr [1:5] "First university degree or diploma" "Bachelor" "Master" "Doctorate" ...</span></span>
<span id="cb18-14"><a href="#cb18-14" tabindex="-1"></a><span class="do">##  $ time       : logi [1:4] TRUE NA NA NA</span></span>
<span id="cb18-15"><a href="#cb18-15" tabindex="-1"></a><span class="do">##  $ elimination: logi [1:4] NA TRUE TRUE TRUE</span></span>
<span id="cb18-16"><a href="#cb18-16" tabindex="-1"></a><span class="do">##  $ title      : chr [1:4] "University students by Year, ISCED Field, Sex and Level of study" "University students by Year, ISCED Field, Sex and Level of study" "University students by Year, ISCED Field, Sex and Level of study" "University students by Year, ISCED Field, Sex and Level of study"</span></span></code></pre></div>
<p>Then you can manually select the dimensions of the dataset you want to query.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Manually create BFS query dimensions</span></span>
<span><span class="co"># Use `code` and `values` elements</span></span>
<span><span class="co"># Use "*" to select all</span></span>
<span><span class="va">dimensions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="st">"Jahr"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"40"</span>, <span class="st">"41"</span><span class="op">)</span>,</span>
<span>  <span class="st">"ISCED Fach"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"0"</span><span class="op">)</span>,</span>
<span>  <span class="st">"Geschlecht"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"*"</span><span class="op">)</span>,</span>
<span>  <span class="st">"Studienstufe"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2"</span>, <span class="st">"3"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Query BFS data with specific dimensions</span></span>
<span><span class="fu">BFS</span><span class="fu">::</span><span class="fu"><a href="reference/bfs_get_data.html">bfs_get_data</a></span><span class="op">(</span></span>
<span>  number_bfs <span class="op">=</span> <span class="st">"px-x-1502040100_131"</span>,</span>
<span>  language <span class="op">=</span> <span class="st">"en"</span>,</span>
<span>  query <span class="op">=</span> <span class="va">dimensions</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="do">## # A tibble: 8 × 5</span></span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a><span class="do">##   Year    `ISCED Field`     Sex    `Level of study` `University students`</span></span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a><span class="do">##   &lt;chr&gt;   &lt;chr&gt;             &lt;chr&gt;  &lt;chr&gt;                            &lt;dbl&gt;</span></span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a><span class="do">## 1 2020/21 Education science Male   Master                             151</span></span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a><span class="do">## 2 2020/21 Education science Male   Doctorate                          121</span></span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a><span class="do">## 3 2020/21 Education science Female Master                             555</span></span>
<span id="cb20-7"><a href="#cb20-7" tabindex="-1"></a><span class="do">## 4 2020/21 Education science Female Doctorate                          306</span></span>
<span id="cb20-8"><a href="#cb20-8" tabindex="-1"></a><span class="do">## 5 2021/22 Education science Male   Master                             143</span></span>
<span id="cb20-9"><a href="#cb20-9" tabindex="-1"></a><span class="do">## 6 2021/22 Education science Male   Doctorate                          115</span></span>
<span id="cb20-10"><a href="#cb20-10" tabindex="-1"></a><span class="do">## 7 2021/22 Education science Female Master                             599</span></span>
<span id="cb20-11"><a href="#cb20-11" tabindex="-1"></a><span class="do">## 8 2021/22 Education science Female Doctorate                          318</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="catalog-of-tables">Catalog of tables<a class="anchor" aria-label="anchor" href="#catalog-of-tables"></a>
</h3>
<p>A lot of datasets are not accessible through the official PXWeb API. They are listed in the <a href="https://www.bfs.admin.ch/bfs/de/home/statistiken/kataloge-datenbanken/tabellen.html" class="external-link">catalog of tables</a>. You can search for specific tables using <code><a href="reference/bfs_get_catalog_tables.html">bfs_get_catalog_tables()</a></code>.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">catalog_tables_en_students</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bfs_get_catalog_tables.html">bfs_get_catalog_tables</a></span><span class="op">(</span>language <span class="op">=</span> <span class="st">"en"</span>, title <span class="op">=</span> <span class="st">"students"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">catalog_tables_en_students</span></span></code></pre></div>
<div class="sourceCode" id="cb22"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="do">## # A tibble: 5 × 7</span></span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a><span class="do">##   title              language publication_date    number_asset url_bfs url_table</span></span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a><span class="do">##   &lt;chr&gt;              &lt;chr&gt;    &lt;dttm&gt;                     &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;    </span></span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a><span class="do">## 1 Students at unive… en       2023-04-05 00:00:00     24865589 https:… https://…</span></span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a><span class="do">## 2 Students at unive… en       2023-04-05 00:00:00     24865590 https:… https://…</span></span>
<span id="cb22-6"><a href="#cb22-6" tabindex="-1"></a><span class="do">## 3 Students at unive… en       2023-03-28 08:30:00     24345362 https:… https://…</span></span>
<span id="cb22-7"><a href="#cb22-7" tabindex="-1"></a><span class="do">## 4 Students at unive… en       2023-03-28 08:30:00     24345374 https:… https://…</span></span>
<span id="cb22-8"><a href="#cb22-8" tabindex="-1"></a><span class="do">## 5 Students at unive… en       2023-03-28 08:30:00     24345366 https:… https://…</span></span>
<span id="cb22-9"><a href="#cb22-9" tabindex="-1"></a><span class="do">## # ℹ 1 more variable: catalog_date &lt;dttm&gt;</span></span></code></pre></div>
<p>Most of the BFS tables are Excel or CSV files. You can download an table with <code><a href="reference/bfs_download_asset.html">bfs_download_asset()</a></code> using the <code>number asset</code>.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">tables_asset_number_students</span> <span class="op">&lt;-</span> <span class="va">catalog_tables_en_students</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">title</span> <span class="op">==</span> <span class="st">"Students at universities and institutes of technology: Basistables"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">number_asset</span><span class="op">)</span></span>
<span></span>
<span><span class="va">file_path</span> <span class="op">&lt;-</span> <span class="fu">BFS</span><span class="fu">::</span><span class="fu"><a href="reference/bfs_download_asset.html">bfs_download_asset</a></span><span class="op">(</span></span>
<span>  number_asset <span class="op">=</span> <span class="va">tables_asset_number_students</span>,</span>
<span>  destfile <span class="op">=</span> <span class="st">"su-e-15.02.04.01.xlsx"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="access-geodata-catalog">Access geodata catalog<a class="anchor" aria-label="anchor" href="#access-geodata-catalog"></a>
</h2>
<p>Display geo-information catalog of the Swiss Official STAC API using <code><a href="reference/bfs_get_catalog_geodata.html">bfs_get_catalog_geodata()</a></code>.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">catalog_geodata</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bfs_get_catalog_geodata.html">bfs_get_catalog_geodata</a></span><span class="op">(</span>include_metadata <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">catalog_geodata</span></span></code></pre></div>
<div class="sourceCode" id="cb25"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="do">## # A tibble: 281 × 12</span></span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a><span class="do">##    collection_id     type  href  title description created updated crs   license</span></span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a><span class="do">##    &lt;chr&gt;             &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;  </span></span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a><span class="do">##  1 ch.are.agglomera… API   http… Citi… "The list … 2021-1… 2023-0… http… propri…</span></span>
<span id="cb25-5"><a href="#cb25-5" tabindex="-1"></a><span class="do">##  2 ch.are.alpenkonv… API   http… Alpi… "The perim… 2021-1… 2022-0… http… propri…</span></span>
<span id="cb25-6"><a href="#cb25-6" tabindex="-1"></a><span class="do">##  3 ch.are.belastung… API   http… Load… "Passenger… 2021-1… 2022-0… http… propri…</span></span>
<span id="cb25-7"><a href="#cb25-7" tabindex="-1"></a><span class="do">##  4 ch.are.belastung… API   http… Load… "Passenger… 2021-1… 2022-0… http… propri…</span></span>
<span id="cb25-8"><a href="#cb25-8" tabindex="-1"></a><span class="do">##  5 ch.are.belastung… API   http… Load… "Vehicles … 2021-1… 2022-0… http… propri…</span></span>
<span id="cb25-9"><a href="#cb25-9" tabindex="-1"></a><span class="do">##  6 ch.are.belastung… API   http… Load… "Vehicles … 2021-1… 2022-0… http… propri…</span></span>
<span id="cb25-10"><a href="#cb25-10" tabindex="-1"></a><span class="do">##  7 ch.are.erreichba… API   http… Acce… "Accessibi… 2021-1… 2022-0… http… propri…</span></span>
<span id="cb25-11"><a href="#cb25-11" tabindex="-1"></a><span class="do">##  8 ch.are.erreichba… API   http… Acce… "Accessibi… 2021-1… 2022-0… http… propri…</span></span>
<span id="cb25-12"><a href="#cb25-12" tabindex="-1"></a><span class="do">##  9 ch.are.gemeindet… API   http… Typo… "The typol… 2021-1… 2022-0… http… propri…</span></span>
<span id="cb25-13"><a href="#cb25-13" tabindex="-1"></a><span class="do">## 10 ch.are.gueteklas… API   http… Publ… "The publi… 2021-1… 2023-0… http… propri…</span></span>
<span id="cb25-14"><a href="#cb25-14" tabindex="-1"></a><span class="do">## # ℹ 271 more rows</span></span>
<span id="cb25-15"><a href="#cb25-15" tabindex="-1"></a><span class="do">## # ℹ 3 more variables: provider_name &lt;chr&gt;, bbox &lt;list&gt;, inverval &lt;list&gt;</span></span></code></pre></div>
<div class="section level3">
<h3 id="download-geodata">Download geodata<a class="anchor" aria-label="anchor" href="#download-geodata"></a>
</h3>
<p>For example you can get information about the dataset “Generalised borders G1 and area with urban character”.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">geodata_g1</span> <span class="op">&lt;-</span> <span class="va">catalog_geodata</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">title</span> <span class="op">==</span> <span class="st">"Generalised borders G1 and area with urban character"</span><span class="op">)</span></span>
<span>  </span>
<span><span class="va">geodata_g1</span></span></code></pre></div>
<div class="sourceCode" id="cb27"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="do">## # A tibble: 1 × 12</span></span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a><span class="do">##   collection_id      type  href  title description created updated crs   license</span></span>
<span id="cb27-3"><a href="#cb27-3" tabindex="-1"></a><span class="do">##   &lt;chr&gt;              &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;  </span></span>
<span id="cb27-4"><a href="#cb27-4" tabindex="-1"></a><span class="do">## 1 ch.bfs.generalisi… API   http… Gene… Administra… 2022-0… 2023-0… http… propri…</span></span>
<span id="cb27-5"><a href="#cb27-5" tabindex="-1"></a><span class="do">## # ℹ 3 more variables: provider_name &lt;chr&gt;, bbox &lt;list&gt;, inverval &lt;list&gt;</span></span></code></pre></div>
<p>Download dataset by collection id with <code><a href="reference/bfs_download_geodata.html">bfs_download_geodata()</a></code> and unzip file if needed.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Access Generalised borders G1 and area with urban character</span></span>
<span><span class="va">borders_g1_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bfs_download_geodata.html">bfs_download_geodata</a></span><span class="op">(</span></span>
<span>  collection_id <span class="op">=</span> <span class="st">"ch.bfs.generalisierte-grenzen_agglomerationen_g1"</span>, </span>
<span>  output_dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span> <span class="co">#  temporary directory</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># you may need to unzip the file</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/unzip.html" class="external-link">unzip</a></span><span class="op">(</span><span class="va">borders_g1_path</span><span class="op">[</span><span class="fl">4</span><span class="op">]</span>, exdir <span class="op">=</span> <span class="st">"borders_G1"</span><span class="op">)</span></span></code></pre></div>
<p>By default, the files are downloaded in a temporary directory. You can specify the folder where saving the files using the <code>output_dir</code> argument.</p>
</div>
<div class="section level3">
<h3 id="cartographic-base-maps">Cartographic base maps<a class="anchor" aria-label="anchor" href="#cartographic-base-maps"></a>
</h3>
<p>You can get <a href="https://www.bfs.admin.ch/bfs/en/home/statistics/regional-statistics/base-maps/cartographic-bases.assetdetail.24025646.html" class="external-link">cartographic base maps</a> from the ThemaKart project using <code><a href="reference/bfs_get_base_maps.html">bfs_get_base_maps()</a></code>. For instance you can get the communes and main lakes. The list of available geometries in the <a href="https://www.bfs.admin.ch/asset/en/24025645" class="external-link">official documentation</a>.</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># list of geometry names: https://www.bfs.admin.ch/asset/en/24025645</span></span>
<span><span class="va">switzerland_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bfs_get_base_maps.html">bfs_get_base_maps</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"suis"</span><span class="op">)</span></span>
<span><span class="va">communes_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bfs_get_base_maps.html">bfs_get_base_maps</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"polg"</span>, date <span class="op">=</span> <span class="st">"20230101"</span><span class="op">)</span></span>
<span><span class="va">districts_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bfs_get_base_maps.html">bfs_get_base_maps</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"bezk"</span><span class="op">)</span></span>
<span><span class="va">cantons_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bfs_get_base_maps.html">bfs_get_base_maps</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"kant"</span><span class="op">)</span></span>
<span><span class="va">cantons_capitals_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bfs_get_base_maps.html">bfs_get_base_maps</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"stkt"</span>, type <span class="op">=</span> <span class="st">"Pnts"</span>, category <span class="op">=</span> <span class="st">"kk"</span><span class="op">)</span></span>
<span><span class="va">lakes_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/bfs_get_base_maps.html">bfs_get_base_maps</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"seen"</span>, category <span class="op">=</span> <span class="st">"11"</span><span class="op">)</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">communes_sf</span>, fill <span class="op">=</span> <span class="st">"snow"</span>, color <span class="op">=</span> <span class="st">"grey45"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">lakes_sf</span>, fill <span class="op">=</span> <span class="st">"lightblue2"</span>, color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">districts_sf</span>, fill <span class="op">=</span> <span class="st">"transparent"</span>, color <span class="op">=</span> <span class="st">"grey65"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">cantons_sf</span>, fill <span class="op">=</span> <span class="st">"transparent"</span>, color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">cantons_capitals_sf</span>, shape <span class="op">=</span> <span class="fl">18</span>, size <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>axis.text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"Source: ThemaKart, © BFS"</span><span class="op">)</span></span></code></pre></div>
<p><img style="border:1px solid black;" src="https://raw.githubusercontent.com/lgnbhl/BFS/master/man/figures/base_maps.png" align="center"></p>
</div>
<div class="section level3">
<h3 id="swiss-official-commune-register">Swiss Official Commune Register<a class="anchor" aria-label="anchor" href="#swiss-official-commune-register"></a>
</h3>
<p>The package also contains the official Swiss official commune registers for different administrative levels.</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># commune register data</span></span>
<span><span class="fu">BFS</span><span class="fu">::</span><span class="va"><a href="reference/register_gde.html">register_gde</a></span></span></code></pre></div>
<div class="sourceCode" id="cb31"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="do">## # A tibble: 2,136 × 8</span></span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a><span class="do">##    GDEKT GDEBZNR GDENR GDENAME            GDENAMK      GDEBZNA GDEKTNA GDEMUTDAT</span></span>
<span id="cb31-3"><a href="#cb31-3" tabindex="-1"></a><span class="do">##    &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;              &lt;chr&gt;        &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;    </span></span>
<span id="cb31-4"><a href="#cb31-4" tabindex="-1"></a><span class="do">##  1 ZH        101     1 Aeugst am Albis    Aeugst am A… Bezirk… Zürich  1976-11-…</span></span>
<span id="cb31-5"><a href="#cb31-5" tabindex="-1"></a><span class="do">##  2 ZH        101     2 Affoltern am Albis Affoltern a… Bezirk… Zürich  1848-09-…</span></span>
<span id="cb31-6"><a href="#cb31-6" tabindex="-1"></a><span class="do">##  3 ZH        101     3 Bonstetten         Bonstetten   Bezirk… Zürich  1848-09-…</span></span>
<span id="cb31-7"><a href="#cb31-7" tabindex="-1"></a><span class="do">##  4 ZH        101     4 Hausen am Albis    Hausen am A… Bezirk… Zürich  1911-01-…</span></span>
<span id="cb31-8"><a href="#cb31-8" tabindex="-1"></a><span class="do">##  5 ZH        101     5 Hedingen           Hedingen     Bezirk… Zürich  1848-09-…</span></span>
<span id="cb31-9"><a href="#cb31-9" tabindex="-1"></a><span class="do">##  6 ZH        101     6 Kappel am Albis    Kappel am A… Bezirk… Zürich  1911-01-…</span></span>
<span id="cb31-10"><a href="#cb31-10" tabindex="-1"></a><span class="do">##  7 ZH        101     7 Knonau             Knonau       Bezirk… Zürich  1848-09-…</span></span>
<span id="cb31-11"><a href="#cb31-11" tabindex="-1"></a><span class="do">##  8 ZH        101     8 Maschwanden        Maschwanden  Bezirk… Zürich  1848-09-…</span></span>
<span id="cb31-12"><a href="#cb31-12" tabindex="-1"></a><span class="do">##  9 ZH        101     9 Mettmenstetten     Mettmenstet… Bezirk… Zürich  1848-09-…</span></span>
<span id="cb31-13"><a href="#cb31-13" tabindex="-1"></a><span class="do">## 10 ZH        101    10 Obfelden           Obfelden     Bezirk… Zürich  1848-09-…</span></span>
<span id="cb31-14"><a href="#cb31-14" tabindex="-1"></a><span class="do">## # ℹ 2,126 more rows</span></span></code></pre></div>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># canton register data</span></span>
<span><span class="fu">BFS</span><span class="fu">::</span><span class="va"><a href="reference/register_kt.html">register_kt</a></span></span></code></pre></div>
<div class="sourceCode" id="cb33"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="do">## # A tibble: 26 × 3</span></span>
<span id="cb33-2"><a href="#cb33-2" tabindex="-1"></a><span class="do">##     KTNR GDEKT GDEKTNA            </span></span>
<span id="cb33-3"><a href="#cb33-3" tabindex="-1"></a><span class="do">##    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;              </span></span>
<span id="cb33-4"><a href="#cb33-4" tabindex="-1"></a><span class="do">##  1     1 ZH    Zürich             </span></span>
<span id="cb33-5"><a href="#cb33-5" tabindex="-1"></a><span class="do">##  2     2 BE    Bern / Berne       </span></span>
<span id="cb33-6"><a href="#cb33-6" tabindex="-1"></a><span class="do">##  3     3 LU    Luzern             </span></span>
<span id="cb33-7"><a href="#cb33-7" tabindex="-1"></a><span class="do">##  4     4 UR    Uri                </span></span>
<span id="cb33-8"><a href="#cb33-8" tabindex="-1"></a><span class="do">##  5     5 SZ    Schwyz             </span></span>
<span id="cb33-9"><a href="#cb33-9" tabindex="-1"></a><span class="do">##  6     6 OW    Obwalden           </span></span>
<span id="cb33-10"><a href="#cb33-10" tabindex="-1"></a><span class="do">##  7     7 NW    Nidwalden          </span></span>
<span id="cb33-11"><a href="#cb33-11" tabindex="-1"></a><span class="do">##  8     8 GL    Glarus             </span></span>
<span id="cb33-12"><a href="#cb33-12" tabindex="-1"></a><span class="do">##  9     9 ZG    Zug                </span></span>
<span id="cb33-13"><a href="#cb33-13" tabindex="-1"></a><span class="do">## 10    10 FR    Fribourg / Freiburg</span></span>
<span id="cb33-14"><a href="#cb33-14" tabindex="-1"></a><span class="do">## # ℹ 16 more rows</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="main-dependencies-of-the-package">Main dependencies of the package<a class="anchor" aria-label="anchor" href="#main-dependencies-of-the-package"></a>
</h2>
<p>Under the hood, this package is using the <a href="https://ropengov.github.io/pxweb/index.html" target="_blank" class="external-link">pxweb</a> package to query the Swiss Federal Statistical Office PXWEB API. PXWEB is an API structure developed by Statistics Sweden and other national statistical institutions (NSI) to disseminate public statistics in a structured way. To query the Geo Admin STAC API, this package is using the <a href="https://brazil-data-cube.github.io/rstac/" class="external-link">rstac</a> package. STAC is a specification of files and web services used to describe geospatial information assets.</p>
<p>You can clean the column names of the datasets automatically using <code><a href="https://sfirke.github.io/janitor/reference/clean_names.html" class="external-link">janitor::clean_names()</a></code> by adding the argument <code>clean_names = TRUE</code> in the <code><a href="reference/bfs_get_data.html">bfs_get_data()</a></code> function.</p>
</div>
<div class="section level2">
<h2 id="other-information">Other information<a class="anchor" aria-label="anchor" href="#other-information"></a>
</h2>
<p>This package is in no way officially related to or endorsed by the Swiss Federal Statistical Office (BFS).</p>
</div>
<div class="section level2">
<h2 id="contribute">Contribute<a class="anchor" aria-label="anchor" href="#contribute"></a>
</h2>
<p>Any contribution is strongly appreciated. Feel free to report a bug, ask any question or make a pull request for any remaining <a href="https://github.com/lgnbhl/BFS/issues" class="external-link">issue</a>.</p>
</div>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=BFS" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/lgnbhl/BFS/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/lgnbhl/BFS/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing BFS</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Felix Luginbuhl <br><small class="roles"> Author, maintainer </small>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://CRAN.R-project.org/package=BFS" class="external-link"><img src="https://www.r-pkg.org/badges/version/BFS" alt="CRAN status"></a></li>
<li><a href="https://cran.r-project.org/package=BFS" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/grand-total/BFS" alt="Grand total"></a></li>
<li><a href="https://github.com/lgnbhl/BFS/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/lgnbhl/BFS/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Felix Luginbuhl.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
